!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t:e.mnster=t(e)}(this,function(e){"use strict";var t={},n="mns",o=/^(mns-)/,r=/(\-[a-zA-Z0-9]+)+/,i=function(e,t){for(var n=t.split("."),o=e,r=0,i=n.length;i>r;r++){if("undefined"==typeof o[n[r]]||null===o[n[r]])return null;o=o[n[r]]}return o},l=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.innerText&&(e.innerText="")},a=function(t){var n=this;n.template=t.template,n.model={},n.model[t.context]=t.model,n.controller=t.controller||e,n.bindModel()};a.prototype.bindModel=function(){var e=this,t=0;for(e.nodes=e.template.querySelectorAll("*"),e.bindNode(e.template),t=e.nodes.length;t;)e.bindNode(e.nodes[--t]);t=null},a.prototype.bindNode=function(e){for(var n,l,a,d=this,u=e.attributes,c=u.length;c;)if(n=u[--c],l=n.name,a=l.replace(o,"").replace(r,""),o.test(l)&&t[a])try{t[a]({node:e,attribute:n.name,value:n.value,valueFromModel:i(d.model,n.value),controller:d.controller})}catch(s){console.log("mnster binding error: "+s)}u=c=n=l=a=null},a.prototype.update=function(){var e=this,t=0;for(e.bindNode(e.template),t=e.nodes.length;t;)e.bindNode(e.nodes[--t]);t=null};var d=function(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw new Error("mnster.view: You must pass a valid template as a first argument");if(!t||!t.context||!t.model)throw new Error("mnster.view: You must specify a context and a model");var n=new a({template:e,context:t.context,model:t.model,controller:t.controller});return n},u=function(e,n){if("string"!=typeof e)throw new Error("mnster.binding: name must be a string");if("function"!=typeof n)throw new Error("mnster.binding: you must specify a method");if(t[e])throw new Error("mnster.binding: a binding with this name already exists");t[e]=n},c=function(e){if("string"!=typeof e)throw new Error("mnster.clean: name must be a string");t[e]&&(t[e]=null)},s=function(e){if("string"!=typeof e||""===e)throw new Error("mnster.prefix: prefix must be a populated string");n=e,o=new RegExp("^("+e+")-")};return u("text",function(e){var t=e.node,n=e.valueFromModel,o=t.innerText?"innerText":"textContent";t[o]=null!==n?n+"":""}),u("html",function(e){var t=e.node,n=e.valueFromModel;t.innerHTML=null!==n?n+"":""}),u("attr",function(e){var t=e.node,o=e.attribute.replace(n+"-attr-",""),r=e.valueFromModel;o&&null!==r&&t.setAttribute(o,r+"")}),u("data",function(e){var t=e.node,o=e.attribute.replace(n+"-",""),r=e.valueFromModel;o.replace("data-","")&&null!==r&&t.setAttribute(o,r+"")}),u("show",function(e){e.node.style.display=e.valueFromModel?"block":"none"}),u("hide",function(e){e.node.style.display=e.valueFromModel?"none":"block"}),u("on",function(e){function t(e,t,n){"addEventListener"in document.body?e.addEventListener(t,n,!1):"attachEvent"in document.body?e.attachEvent(t,n):e["on"+t]=n}var o=e.controller[e.value],r=e.attribute.replace(n+"-on-","");"function"==typeof o&&t(e.node,r,o)}),u("each",function(e){var t,o,r,i=e.node,d=e.valueFromModel,u=e.attribute.replace(n+"-each-","");i.__mnsterEachTemplate__||(i.__mnsterEachTemplate__=document.createElement("div"),i.__mnsterEachTemplate__.innerHTML=i.innerHTML),l(i);for(var c in d)d.hasOwnProperty(c)&&(r=document.createElement("div"),r.innerHTML=i.__mnsterEachTemplate__.innerHTML,o=d[c]||{},t=new a({template:r,context:u,model:o}),i.innerHTML+=r.innerHTML);t=o=r=null}),{view:d,binding:u,clean:c,prefix:s}});