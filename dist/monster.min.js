!function(e,n){"use strict";"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n:e.monster=n(e)}(this,function(e){"use strict";var n={},t=/^(mns-)/,o=/^(mns-attr-)/,r=/^(mns-each-)/,a=/(\-[a-zA-Z0-9]+)+/,l=function(e){return 1===e.nodeType},i=function(e,n){for(var t=n.split("."),o=e,r=0,a=t.length;a>r;r++){if("undefined"==typeof o[t[r]]||null===o[t[r]])return"";o=o[t[r]]}return o},c=function(){return"classList"in document.body?function(e,n){e.classList.add(n)}:function(e,n){e.className+=""===e.className?n:" "+n}}(),d=function(){return"addEventListner"in document.body?function(e,n,t){e.addEventListener(n,t,!1)}:"attachEvent"in document.body?function(e,n,t){e.attachEvent(n,t)}:function(e,n,t){e["on"+n]=t}}(),u=function(n){var t=this;t.template=n.template,t.model={},t.model[n.context]=n.model,t.controller=n.controller||e,t.bindModel()};u.prototype.bindModel=function(){var e,n=this,t=0;for(n.nodes=n.template.childNodes,n.bindNode(n.template),t=n.nodes.length;t;)e=n.nodes[--t],l(e)&&n.bindNode(e);e=t=null},u.prototype.bindNode=function(e){for(var o,r,l,i=this,c=e.attributes,d=c.length;d;)o=c[--d],r=o.name,l=r.replace(t,"").replace(a,""),t.test(r)&&l in n&&n[l](e,o,i.model,i.controller);c=d=o=r=l=null},u.prototype.update=function(){var e=this;e.bindNode(e.template);for(var n=0,t=e.nodes.length;t>n;n++)e.bindNode(e.nodes[n])},n.text=function(e,n,t){var o=i(t,n.value);e.innerHTML=o+""},n.attr=function(e,n,t){var r=n.name.replace(o,""),a=i(t,n.value);e.setAttribute(r,a+"")},n.data=function(e,n,o){var r=n.name.replace(t,""),a=i(o,n.value);e.setAttribute(r,a+"")},n.each=function(e,n,t){var o,a,l,c,d=i(t,n.value),s=n.name.replace(r,"");e.__monsterTemplate__||(e.__monsterTemplate__=e.children[0].cloneNode(!0)),c=e.__monsterTemplate__.cloneNode(!0),e.innerHTML="";for(var f in d)l=c.cloneNode(!0),o=d[f]||{},a=new u({template:l,context:s,model:o}),e.appendChild(l);o=l=a=c=null},n.show=function(e,n,t){var o=i(t,n.value);e.style.display=o?"block":"none"},n.hide=function(e,n,t){var o=i(t,n.value);e.style.display=o?"none":"block"},n["class"]=function(e,n,t){if(n.value){var o=i(t,n.value);c(e,o+"")}},n.on=function(e,n,o,r){var a=n.name.replace(t,"").replace("on-",""),l=r[n.value];"function"==typeof l&&d(e,a,l)};var s=function(e,n){if(!e||!l(e))return void console.error("monster.view: You must pass a valid template as a first argument");if(!n.context||!n.model)return void console.error("monster.view: You must specify a context and a model");var t=new u({template:e,context:n.context,model:n.model,controller:n.controller});return t};return{view:s}});