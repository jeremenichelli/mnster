!function(e,n){"use strict";"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n:e.monster=n(e)}(this,function(e){"use strict";var n={},t=/^(mns-)/,o=/^(mns-attr-)/,r=/^(mns-each-)/,l=/^(mns-on)/,a=/(\-[a-zA-Z0-9]+)+/,i=function(e){return 1===e.nodeType},c=function(e,n){for(var t=n.split("."),o=e,r=0,l=t.length;l>r;r++){if("undefined"==typeof o[t[r]]||null===o[t[r]])return"";o=o[t[r]]}return o},s=function(){return"classList"in document.body?function(e,n){e.classList.add(n)}:function(e,n){e.className+=""===e.className?n:" "+n}}(),d=function(n){var t=this;t.template=n.template,t.model={},t.model[n.context]=n.model,t.controller=n.controller||e,t.bindModel()};d.prototype.bindModel=function(){var e,n=this,t=0;for(n.nodes=n.template.childNodes,n.bindNode(n.template),t=n.nodes.length;t;)e=n.nodes[--t],i(e)&&n.bindNode(e);e=t=null},d.prototype.bindNode=function(e){for(var o,r,i,c=this,s=e.attributes,d=s.length;d;)o=s[--d],r=o.name,i=r.replace(t,"").replace(a,""),t.test(r)&&i in n?n[i](e,o,c.model):l.test(r)&&n.on(e,o,c.model,c.controller);s=d=o=r=i=null},d.prototype.update=function(){for(var e=this,n=0,t=e.nodes.length;t>n;n++)e.bindNode(e.nodes[n])},n.text=function(e,n,t){var o=c(t,n.value);e.innerHTML=o+""},n.attr=function(e,n,t){var r=n.name.replace(o,""),l=c(t,n.value);e.setAttribute(r,l+"")},n.data=function(e,n,o){var r=n.name.replace(t,""),l=c(o,n.value);e.setAttribute(r,l+"")},n.each=function(e,n,t){var o,l,a,i,s=c(t,n.value),u=n.name.replace(r,"");e.__monsterTemplate__||(e.__monsterTemplate__=e.children[0].cloneNode(!0)),i=e.__monsterTemplate__.cloneNode(!0),e.innerHTML="";for(var m in s)a=i.cloneNode(!0),o=s[m]||{},l=new d({template:a,context:u,model:o}),e.appendChild(a);o=a=l=i=null},n.show=function(e,n,t){var o=c(t,n.value);e.style.display=o?"block":"none"},n.hide=function(e,n,t){var o=c(t,n.value);e.style.display=o?"none":"block"},n["class"]=function(e,n,t){if(n.value){var o=c(t,n.value);s(e,o+"")}},n.on=function(e,n,o,r){var l=n.name.replace(t,""),a=r[n.value];"function"==typeof a&&(e[l]=a.bind(e))};var u=function(e,n){if(!e||!i(e))return void console.error("monster.view: You must pass a valid template as a first argument");if(!n.context||!n.model)return void console.error("monster.view: You must specify a context and a model");var t=new d({template:e,context:n.context,model:n.model,controller:n.controller});return t};return{view:u}});