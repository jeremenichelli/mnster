!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t:e.monster=t(e)}(this,function(e){"use strict";var t={},n=/^(mns-)/,o=/(\-[a-zA-Z0-9]+)+/,r=function(e){return 1===e.nodeType},l=function(e,t){for(var n=t.split("."),o=e,r=0,l=n.length;l>r;r++){if("undefined"==typeof o[n[r]]||null===o[n[r]])return"";o=o[n[r]]}return o},a=function(){return"classList"in document.body?function(e,t){e.classList.add(t)}:function(e,t){e.className+=""===e.className?t:" "+t}}(),d=function(){return"addEventListner"in document.body?function(e,t,n){e.addEventListener(t,n,!1)}:"attachEvent"in document.body?function(e,t,n){e.attachEvent(t,n)}:function(e,t,n){e["on"+t]=n}}(),i=function(t){var n=this;n.template=t.template,n.model={},n.model[t.context]=t.model,n.controller=t.controller||e,n.bindModel()};i.prototype.bindModel=function(){var e,t=this,n=0;for(t.nodes=t.template.childNodes,t.bindNode(t.template),n=t.nodes.length;n;)e=t.nodes[--n],r(e)&&t.bindNode(e);e=n=null},i.prototype.bindNode=function(e){for(var r,a,d,i=this,u=e.attributes,c=u.length;c;)if(r=u[--c],a=r.name,d=a.replace(n,"").replace(o,""),n.test(a)&&d in t)try{t[d]({node:e,attribute:r.name,value:r.value,valueFromModel:l(i.model,r.value),controller:i.controller})}catch(s){console.error(s)}u=c=r=a=d=null},i.prototype.update=function(){var e,t=this,n=0;for(t.bindNode(t.template),n=t.nodes.length;n;)e=t.nodes[--n],r(e)&&t.bindNode(e);e=n=null},t.text=function(e){var t=e.node;t.innerHTML=e.valueFromModel+""},t.attr=function(e){var t=e.node,n=e.attribute.replace("mns-attr-","");t.setAttribute(n,e.valueFromModel+"")},t.data=function(e){var t=e.node,n=e.attribute.replace("mns-","");t.setAttribute(n,e.valueFromModel+"")},t.each=function(e){var t,n,o,r,l=e.node,a=e.valueFromModel,d=e.attribute.replace("mns-each-","");l.__monsterTemplate__||(l.__monsterTemplate__=l.children[0].cloneNode(!0)),r=l.__monsterTemplate__.cloneNode(!0),l.innerHTML="";for(var u in a)o=r.cloneNode(!0),t=a[u]||{},n=new i({template:o,context:d,model:t}),l.appendChild(o);t=o=n=r=null},t.show=function(e){var t=e.node;t.style.display=e.valueFromModel?"block":"none"},t.hide=function(e){var t=e.node;t.style.display=e.valueFromModel?"none":"block"},t["class"]=function(e){var t=e.node;""!==e.valueFromModel&&a(t,e.valueFromModel+"")},t.on=function(e){var t=e.node,n=e.attribute.replace("mns-on-",""),o=e.controller[e.value];"function"==typeof o&&d(t,n,o)};var u=function(e,t){if(!e||!r(e))return void console.error("monster.view: You must pass a valid template as a first argument");if(!t.context||!t.model)return void console.error("monster.view: You must specify a context and a model");var n=new i({template:e,context:t.context,model:t.model,controller:t.controller});return n};return{view:u}});